# 指数合成说明

## 需求
* 部分用户有使用指数来驱动，下单到主力的需求。使用指数驱动的好处是数据波动小
* 这里提供了通过配置文件生成合成行情的功能，目前所有CTP和仿CTP接口都支持此功能

## 使用方法
1. 第一次调用时自动在CTP_Quote_x86.dll下生成Synthetic.json
2. 编辑此json文件，格式严格不能有误，然后重新启动
3. 订阅json文件中设置好的合成合约即可收到行情。
4. 默认是成份合约的行情都到达才能合成新的行情，由于CTP对于很不活跃的合约在初次订阅时也会推送一条行情。而没有这个机制的API在这个功能下会遇到问题。

## 格式说明
1. Symbol:合成合约代码。用于上层接口调用
2. Method:所使用的算法
3. Emits: 触发行情的合约数组，为空则任意成份合约行情过来都触发。出于效率考虑，只保留一个主力合约最合适
4. Legs: 成份合约和权重

## 算法说明
1. OpenInterest:持仓量加权。Legs中的权重参数被忽略。大部分品种的指数是使用的此方法，如IF000
2. Weight:权重法。权重参数可以任意设置，但在这里一般是让权重和等于1。如南华商品指数
3. Spread:价差法。算法与Weight法一样，但多加了买卖一价和买卖一量的计算。参数一般会有正有负，权重之和也不会等于1了
4. Copy:复制法。纯粹是给合约换个名，所以权重参数被忽略。如IF888这种主力合约行情